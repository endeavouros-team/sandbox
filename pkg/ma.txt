#!/bin/bash

Main() {
  Install=(
    #linux-lts linux-lts-headers
    akm
    atril
    code
    emacs
    gparted
    gufw
    #kaffeine
    #libreoffice-fresh
    llpp
    #meld
    mpv
    ncdu
    rcs
    simple-scan
    solaar
    terminator
  )

  Remove=(
    #r8168
    adobe-source-han-sans-jp-fonts
    adobe-source-han-sans-kr-fonts
    adobe-source-han-sans-cn-fonts
    glances
    s-tui
    keyserver-rank
    parole
    #mousepad
    xed
    #blueberry
    capitaine-cursors
    file-roller
  )
  local need_mkinitcpio=no

  if [ "${Install[0]}" = "linux-lts" ] && (! pacman -Q linux-lts >& /dev/null) ; then
    need_mkinitcpio=yes
  fi

  pacman -Rsn --noconfirm "${Remove[@]}"
  pacman -S --noconfirm --needed "${Install[@]}"
  sleep 1

  if [ "$need_mkinitcpio" = "yes" ] ; then
    mkinitcpio -p linux-lts
    sleep 1
    grub-mkconfig -o /boot/grub/grub.cfg
  fi
  systemctl enable ufw
}

Main
